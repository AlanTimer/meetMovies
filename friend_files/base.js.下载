define("vipSkinEntry",["jquery"],function(t){var e={init:function(){var e=t("#hometpl_style");return e.length>0&&1!==e.data("notshow")&&(this.btnSkin=t('<div class="vip-skinBtn"></div>').appendTo("#nxHeader .hd-fixed-wraper"),this.btnEntryAction()),this.btnSkin||t()},btnEntryAction:function(){var e=this.btnSkin,i=1,n=null,a=function(){var i=t(window).width()-(t("#webpager").width()||0)-t("#nxHeader .hd-nav").get(0).getBoundingClientRect().right;40>i?e.hide():e.show()};t(document).on("webpager:loaded",function(){a(),e.appendTo("#webpager")}),t(document).on("mainframe:reflow",a),a(),e.on({mouseover:function(){n=setInterval(function(){15>i?(e.css({backgroundPosition:"0 "+50*-i+"px"}),i+=1):i=4},100)},mouseout:function(){clearInterval(n),i=1,e.css({backgroundPosition:"0 0"})},click:function(){t.ajax({url:"http://i.renren.com/api4v7/getV7SkinJsSrc",type:"post",dataType:"json",success:function(t){require.config({paths:{"vip/skin":t[0]}}),require(["vip/skin"],function(t){t.init()})}})}})}};return e}),define("backToTop",["jquery"],function(t){var e={init:function(){this.btn=t("#toolBackTo"),this.backBtn=t("a:first",this.btn),this.doc=t(document),this.win=t(window),this.indexEvents(),this.position()},position:function(){var e=(240===t("#webpager").width()?240:0)+20;this.btn.css("right",e)},indexEvents:function(){var t=this;this.backBtn.on("click",function(){t.doc.scrollTop(0)}),this.win.on("scroll/1",function(){0===t.doc.scrollTop()?t.backBtn.hide():t.backBtn.css("display","block")}),this.doc.on("mainframe:reflow",this.position.bind(this))}};return{init:function(){e.init()}}}),define("feedbackLayer",function(require,t){var e=jQuery.noConflict(),i={isValidate:!0,totalWords:1e3,succMsg:"反馈已发送，我们将尽快处理您的意见或建议。<br />感谢您对2014新版人人网的支持！",errMsg:"服务器错误，请重试！",renderTpl:function(){var t=e("<div></div>").html(['<textarea placeholder="建议描述(必填)"></textarea>',"<p><span>0</span>/"+this.totalWords+"</p>"].join("")).attr("class","v7-feedback-layer");return this.layerDom=t,this.contentArea=t.find("textarea"),this.wordCon=t.find("p"),this.wordsCount=t.find("span"),t},buildLayer:function(){var t=this;e.ui.dialog({title:"建议反馈",width:522,buttons:[{text:"取消",click:function(){e(this).dialog("instance").close()}},{text:"确定",id:"fb_submit",disabled:!0,click:function(){t.submitContent(e(this).dialog("instance"))}}],close:function(){e(this).remove()}},this.renderTpl()),this.submitBtn=e("#fb_submit"),this.submitBtn.parent().after('<a class="feedback-link" href="http://fans.renren.com/forum.php?mod=forumdisplay&fid=71" target="_blank">前往人人粉丝论坛</a>')},toggleBtnState:function(t){"enable"==t?this.submitBtn.removeAttr("disabled").removeClass("ui-button-disabled ui-state-disabled").addClass("ui-button-blue"):"disable"==t&&this.submitBtn.attr("disabled","disabled").removeClass("ui-button-blue").addClass("ui-button-disabled ui-state-disabled")},calcWords:function(t){var e=t.val().length;this.wordsCount.text(e),0>=e?(this.wordCon.attr("class",""),this.toggleBtnState("disable")):e>this.totalWords?(this.isValidate=!1,this.wordCon.attr("class","err-count"),this.toggleBtnState("disable")):(this.isValidate=!0,this.wordCon.attr("class",""),this.toggleBtnState("enable"))},bindCalcWordsEv:function(){var t=this;this.contentArea.bind({keyup:function(){t.calcWords(e(this))},paste:function(){setTimeout(function(){t.calcWords(t.contentArea)},50)}})},isEmpty:function(){return this.fbContent=this.contentArea.val().trim(),""===this.fbContent},submitContent:function(t){if(!this.isEmpty()&&this.isValidate){var i=this;e.ajax({url:"http://help.renren.com/support/leavemessage/v7",type:"post",data:"body="+encodeURIComponent(i.fbContent),dataType:"json",success:function(n){var a=n.rlt;"0"==a?this.error():(t.close(),e.dialog.success(i.succMsg))},error:function(){e.dialog.error(i.errMsg)}})}},init:function(){this.buildLayer(),this.bindCalcWordsEv()}};t.init=function(){i.init()}}),function(t){define("statsLogs",function(require,e){function i(){this.limitCount=10,this.limitTime=15e3,this.logAry=[],this.startTime=(new Date).getTime(),this.interval=null,this.sendLog=function(e){t.post("http://www.renren.com/homeV7Logger/send","log="+e,function(){})},this.writeLog=function(e){t.extend(e,{sendUserId:nx.user.id}),e=JSON.stringify(e),this.logAry.length<=0&&(this.startTime=(new Date).getTime(),this.isTimeout()),this.logAry.push(e),this.isCountout()},this.transformLog=function(){var t="["+this.logAry.join(",")+"]";return t},this.isCountout=function(){this.logAry.length>=this.limitCount&&this.sendAndReset()},this.isTimeout=function(){this.interval=setInterval(function(){(new Date).getTime()-this.startTime>=this.limitTime&&this.sendAndReset()},1e3)},this.sendLogBeforePageUnload=function(){this.sendAndReset(),nx.browser.msie&&setTimeout(function(){},1e3)},this.sendAndReset=function(){this.logAry.length>0&&this.sendLog(this.transformLog()),this.logAry=[],this.interval&&(clearInterval(this.interval),this.interval=null)},this.initialize=function(){var e=this;t(window).bind("unload",function(){e.sendLogBeforePageUnload()}),t(window).bind("beforeunload",function(){e.sendLogBeforePageUnload()})},this.initialize()}e.Logs=i}),define("mainLog",function(require,e){function i(t){var e={hostId:nx.user.id,targetTag:t};c.writeLog(e)}function n(e){for(var n=0;n<e.length;n++)t(e[n].s).bind("click",{index:n},function(t){i(e[t.data.index].t)})}function a(e){for(var n=0;n<e.length;n++)t(e[n].d).delegate(e[n].s,"click",{index:n},function(t){i(e[t.data.index].t)})}var s=[{s:".hd-logo a",t:"logo_click"},{s:"#hd-search",t:"search_click"},{s:".hd-account dt a",t:"name_click"},{s:".hd-account .hd-name",t:"name_click"},{s:"#hdLoginDays",t:"day_click"},{s:".app-nav-list .app-feed a",t:"leftmenu_home_click"},{s:".app-nav-list .app-matter a",t:"leftmenu_matter_click"},{s:".app-nav-list .app-homepage a",t:"leftmenu_profile_click"},{s:".app-nav-list .app-album a",t:"leftmenu_myalbum_click"},{s:".app-nav-list .app-friends a",t:"leftmenu_friend_click"},{s:".app-nav-list .app-school a",t:"leftmenu_xiaoyuan_click"},{s:".app-nav-list .app-share a",t:"leftmenu_hotshare_click"},{s:".app-nav-list .app-myapp a",t:"leftmenu_apps_click"},{s:".app-nav-list .app-manage a",t:"leftmenu_mymanage_click"},{s:".app-nav-list .app-more a",t:"leftmenu_editapps_click"},{s:".app-nav-list .app-more a",t:"leftmenu_editapps_click"},{s:".recent-app-cont li:eq(0) a",t:"leftmenu_recentapp1_click"},{s:".recent-app-cont li:eq(1) a",t:"leftmenu_recentapp2_click"},{s:".recent-app-cont li:eq(2) a",t:"leftmenu_recentapp3_click"},{s:".fd-nav-home ~ a",t:"tab_newsfeed_click"},{s:".content-focus",t:"tab_follow_click"},{s:".group-focus",t:"tab_closefriends_click"},{s:"#toolBackTo a",t:"returnbutton_click"},{s:"#toolRefreshFeed a",t:"newsfeedbutton_click"}],o=[{d:".hd-search",s:"#s-default-items li:eq(0) a",t:"search_newfriends_click"},{d:".hd-search",s:"#s-default-items li:eq(1) a",t:"search_managefriends_click"},{d:".hd-search",s:"#s-default-items li:eq(2) a",t:"search_profile_click"},{d:".hd-search",s:"#s-default-items li:eq(3) a",t:"search_hotshare_click"},{d:"#feed-list",s:".new-feed-tip a",t:"newsfeedbar_click"},{d:".bd-content",s:".textarea-textzone",t:"publicer_cilck"},{d:".bd-content",s:"#appPublisherBtnPhoto",t:"publicer_photo_click"},{d:".bd-content",s:"#appPublisherBtnShare",t:"publicer_share_click"},{d:".bd-content",s:"#appPublisherBtnBlog",t:"publicer_blog_click"},{d:".bd-content",s:"#appPublisherBtnBlog",t:"publicer_movie_click"},{d:".bd-content",s:".ui-renren-publisher-toolbar .ui-button[data-app=photo]",t:"publicer_activated_photo_click"},{d:".bd-content",s:".ui-renren-publisher-toolbar .ui-button[data-app=share]",t:"publicer_activated_share_click"},{d:".bd-content",s:".ui-renren-publisher-toolbar .ui-button[data-app=movie]",t:"publicer_activated_movie_click"}],r=require("statsLogs"),c=new r.Logs;e.init=function(){n(s),a(o)}})}(jQuery),define("friendTopLimit",function(require,t){var e=jQuery.noConflict(),i={renderTpl:function(t){var i="",n="";1==t?(i="您的好友数量即将达到上限TAT~</br>您可以开通关注，让新朋友们关注您，</br>或开通VIP，尊享更高上限哦~",n='<a href="http://vip.renren.com/pay/pre" target="_blank" class="vip-pay">开通VIP</a><a href="http://follow.renren.com/promotion" target="_blank" class="follow-attention">开通关注</a>'):(i="您的好友数量即将到达上限TAT~</br>您可以开通关注，让新朋友们关注您 ~",n='<a href="http://follow.renren.com/promotion" target="_blank" class="follow-attention">开通关注</a>');var a=e("<div></div>").html(['<div class="toplimit-con">','<div class="toplimit-tips">','<p class="toplimit-tips-con">'+i+"</p>","</div>",'<div class="toplimit-btns">'+n+"</div>","</div>"].join(""));return a},buildDialog:function(t){var i=this;require(["ui/dialog"],function(){e.ui.dialog({width:522,buttons:!1,dialogClass:"v7-friend-toplimit",close:function(){e(this).remove()}},i.renderTpl(t))})},init:function(t){this.buildDialog(t)}};t.init=function(){var t=e("#showActivityFlag");if(t[0]){var n=e("#showActivityFlag").val();if(n){var a=e("#showActivityIndex");if(a[0]){var s=a.val();i.init(s)}}}}}),define("headerControls",["jquery"],function(t){var e={showAccountMore:function(){t(".hd-account-action .nv-account-ctrl a").hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}),t(".hd-account-action-vip .account-more").on("mouseenter",function(){var e=t(this).parent().find(".nv-drop-vipstatus-progressbar span");if(e.length){var i=Math.floor(e.parent().width()*parseFloat(e.data("length"))/100);e.hasClass("vipoverdie")?e.width("100%").delay(100).animate({width:i}):e.width(0).delay(100).animate({width:i})}})},showLoginTip:function(){require(["ui/tooltip"],function(){t("#hdLoginDays").tooltip({tooltipClass:"hd-login-tooltip nx-tooltip",position:{my:"center top+20",at:"bottom center"},disabled:!1,items:"[data-tips]:not([disabled])",content:function(){var e=t.parseJSON(t(this).data("tips").replace(/'/g,'"')),i=[];return i.push(e.days?'<p><span class="r">'+e.days+"天</span>连续登录":""),i.push(e.range?'<p><span class="r">'+e.range+"级</span>等级":""),i.push(e.score?'<p><span class="r">'+e.score+"分</span>积分":""),'<div class="t-wrap">'+i.join("")+"</div>"}})})},init:function(){this.showAccountMore(),this.showLoginTip()}};return{init:function(){e.init()}}}),define("responseFrame",["jquery"],function(t){function e(){this.win=t(window),this.rootEle=t("html"),this.bodyEle=t("body"),this.nxContainer=t("#nxContainer"),this.nxHeader=t("#nxHeader"),this.hdFixed=this.nxHeader.find(".hd-fixed-wraper"),this.hdMain=this.nxHeader.find(".hd-main"),this.nxSlidebar=t("#nxSlidebar"),this.subNav=t("#frameFixedNav"),this.fixedLayer=t('<div id="fixedLayer">').prependTo(this.bodyEle),this.fixedWidth=0,this.sidebarWidth=0,this.webpagerWidth=0,this.headerCombined=!1,this.webpagerAutoFolded=!1,nx.store.get("webpager.user")!==nx.user.id.toString()&&(nx.store.set("webpager.user",nx.user.id),nx.store.remove("webpager.html")),this.resizeView(),this.loadWebpager(),t(window).on("resize/50",this.resizeView.bind(this)).on("scroll/1",this.combineNav.bind(this)),t(document).on("webpager:fold",function(){this.resizeViewForWebpager(!0)}.bind(this)).on("webpager:unfold",function(){this.resizeViewForWebpager(!1)}.bind(this)).on("ready newsfeed:single newsfeed:double",this.resizeView.bind(this)),t(window).on("unload",function(){window.scrollTo(0,0)})}return e.prototype={_switchClass:function(t){this.nxContainer.removeClass("nx-normalViewport nx-narrowViewport nx-freeViewport").addClass(t)},_changeClass:function(){var t=this.win.width(),e=this.rootEle.prop("class").match(/nx-main(\d+)/);e?(e=nx.data.isDoubleFeed&&t>=1260?880:Number(e[1]),e+=60,80+e+240>t?this._switchClass("nx-freeViewport"):160+e+240>t?this._switchClass("nx-narrowViewport"):this._switchClass("nx-normalViewport")):this._switchClass("nx-freeViewport")},_computeSize:function(){var t=this._isWPOpen(),e=this.nxContainer.hasClass("nx-freeViewport");e||this.nxContainer.addClass("nx-webpager-"+(t?"unfold":"fold")),this.webpagerWidth=!t||e?0:240,this.sidebarWidth=Number(this.nxSlidebar.outerWidth()),this.fixedWidth=this.win.width()-this.webpagerWidth,this.nxSlidebar.height(this.win.height()-this.nxHeader.height()),this.fixedLayer.width(this.fixedWidth-(t&&e?240:0)),this.hdFixed.width(this.fixedWidth),this.subNav.width(this.fixedWidth-this.sidebarWidth)},_isWPOpen:function(){return nx.webpager.disable?!1:"undefined"==typeof nx.webpager.fold?"1"!==nx.cookie("wp_fold"):!nx.webpager.fold},resizeViewForWebpager:function(e){if(this.nxContainer.hasClass("nx-freeViewport"))return this.nxContainer.removeClass("nx-webpager-fold nx-webpager-unfold"),void this.fixedLayer.width(this.fixedWidth-(e?0:240));if(!this.webpagerAutoFolded){var i=this;this.nxContainer.hasClass("nx-narrowViewport")&&(this.sidebarWidth=this.sidebarWidth?this.sidebarWidth+(e?80:-80):0),this.webpagerWidth=e?0:240,this.fixedWidth=this.win.width()-this.webpagerWidth,this.fixedLayer.velocity({width:this.fixedWidth}),this.nxContainer.velocity({"margin-right":this.webpagerWidth},function(){i.nxContainer.removeClass("nx-webpager-fold nx-webpager-unfold").addClass("nx-webpager-"+(e?"fold":"unfold")),t.event.trigger("mainframe:reflow")}),this.hdFixed.velocity({width:this.fixedWidth},function(){var e=t("#nxHeader .pop-vip");e.length&&(e.insertAfter("#nxHeader .hd-account-action-vip").show(),e.data("bind")||(e.find(".pop-vip-close").one("click",function(){e.remove()}),e.data("bind",!0)))}),this.subNav.velocity({width:this.fixedWidth-this.sidebarWidth})}},resizeView:function(e){this._changeClass(),this._computeSize(),t.event.trigger("mainframe:reflow")},loadWebpager:function(){if(240===this.webpagerWidth&&0===t("#webpager-holder").length&&0===t("body > #webpager").length){var e=t("<div>").attr({id:"webpager-holder"}).html('<div id="webpager"><div class="nav-holder"></div><div class="subnav-holder"></div></div>').height(this.win.height()).insertBefore(this.nxContainer),i=nx.store.get("webpager.html"),n=nx.store.get("webpager.css");i&&n&&nx.load(n,function(){var n=t(i);e.before(n),t("#webpager").height()<t(window).height()?n.remove():e.empty().append(n)})}},combineNav:function(){var e=t(document).scrollTop(),i=nx.browser.msie&&7===nx.browser.versionNumber,n=this;e>150?this.headerCombined||(this.headerCombined=!0,t("#search-result-box").is(":visible")&&t("#hd-search").blur(),this.subNav.velocity("stop").velocity({top:"0px"},function(){t(this).addClass("fix-app-nav"),i&&(n.nxHeader.css("z-index","-1"),n.hdMain.find(".hd-nav").hide())}),i||this.hdMain.find(".hd-nav").velocity("stop").velocity("fadeOut")):this.headerCombined&&(this.headerCombined=!1,this.subNav.removeClass("fix-app-nav").velocity("stop").velocity({top:"50px"}),i?(this.hdMain.find(".hd-nav").show(),this.nxHeader.css("z-index","auto")):this.hdMain.find(".hd-nav").velocity("stop").velocity("fadeIn"))}},{initFrameSize:function(){this.fm=new e},resizeView:function(t){return this.fm.resizeView(t)},combineNav:function(){return this.fm.combineNav()}}}),define("mainframe",function(require){var t=require("jquery"),e=require("headerControls"),i=require("sideBarControls"),n=require("topSearch"),a=require("sidebar"),s=require("backToTop"),o=require("feedbackLayer"),r=require("friendTopLimit"),c=require("lawInfo"),l=require("liquidFooter"),d=require("navControl"),h=require("switchAccount"),p=require("mainLog"),u=require("vipSkinEntry");i.init(),n.init(),a.init(),e.init(),d.init(),s.init(),h.init(),p.init(),l.init(),r.init(),u.init(),t(".v7-feedback").css("display","block").click(function(t){t.stopPropagation(),o.init()}),t("#lawInfo").click(function(){c.init();var e=["<p>	人人网为用户提供网络信息储存空间，遵守法律法规的规定，重视网络版权及其他知识产权的保护。</p>","<h5>	一、通知程序</h5>","<p>	若您认为人人网站上用户发布、转载的作品或包含的权利信息侵犯了您的合法权益，请按以下要求提交材料通知我司。我司将根据权利人提供的材料，遵循相关法律，在审查核实后删除侵权内容。</p>","<p>	通知书应包含以下内容：</p>","<p>	（一） 权利人的姓名（名称）、联系方式、地址、身份证复印件（自然人）、法人或其他组织登记证明复印件（法人或其他组织）；</p>","<p>	（二） 要求删除或者断开链接的侵权作品的准确名称和网络地址；</p>","<p>	（三） 认为构成侵权的初步证明材料，包括但不限于对作品享有著作权或依法享有信息网络传播权的权属证明、创作手稿、经权威机构签发的作品创作时间戳、列举证据证明侵权事实。</p>","<p>	权利人应对通知书的真实性负责。若通知书的内容不真实，权利人将承担由此造成的全部法律责任。</p>","<h5>	二、反通知程序</h5>","<p>	被删除方若认为其发布、转载的作品并未侵犯他人合法权益的，也可像我司提交反通知说明，要求恢复被删除的作品或被断开的作品链接。</p>","<p>反通知应当包含下列内容：</p>","<p>	（一） 作品提供者的姓名（名称）、联系方式、地址、身份证复印件（自然人）、法人或其他组织登记证明复印件（法人或其他组织）；</p>","<p>	（二） 要求恢复被删除的作品，或者被断开链接的作品的准确名称和网络地址；</p>","<p>	（三） 认为不构成侵权的初步证明材料，包括但不限于对作品享有著作权或依法享有信息网络传播权的权属证明、创作手稿、经权威机构签发的作品创作时间戳、列举证据证明对作品依法登载的事实。</p>","<p>	被删除方应对反通知书的真实性负责。若通知书的内容不真实，被删除方将承担由此引起的全部法律责任。</p>","<p>	请将上述材料以电子邮件或邮寄方式寄至我司法务部。</p>","<p>	公司全称：北京千橡网景科技发展有限公司</p>","<p>	公司电话：010-84481818</p>","<p>	公司邮箱：admin@renren-inc.com</p>","<p>	公司地址：北京市朝阳区酒仙桥中路18号国投创意信息产业园北楼5层</p>"].join("");t(".ui-dialog .copyright").click(function(){t(".law-info").addClass("copyright"),t(".ui-dialog .ui-dialog-title").html("版权指引"),t(".ui-dialog .ui-widget-content").html(e),t(".ui-dialog").css({width:"750px",position:"fixed"}),t(".ui-dialog").css("top",(t(window).height()-t(".ui-dialog").height())/2+"px"),t(".ui-dialog").css("left",(t(window).width()-t(".ui-dialog").width())/2+"px")})})}),require(["jquery","responseFrame"],function(t,e){var i=setInterval(function(){t("#nxHeader").length&&(clearInterval(i),"object"!=typeof e.fm&&e.initFrameSize())},1);t(function(){require(["mainframe"],t.noop)}),window._developer_no_webpager=!0}),define("lawInfo",function(require,t){var e=jQuery.noConflict(),i={tpl:['<div class="law-info">',"北京斗牛士文化传媒有限公司<br />",'<a href="http://sq.ccm.gov.cn/ccnt/sczr/service/business/emark/toDetail/DFB957BAEB8B417882539C9B9F9547E6" target="_blank">京网文[2016]0775-060号</a> · <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP证090254号</a><br />',"京公网安备11000002002001号 · 乙测资字1111532<br />","文化部监督电子邮箱：wlwh@vip.sina.com<br />",'<a href="http://a.xnimg.cn/n/core/res/certificate.jpg" target="_blank">互联网药品信息服务资格证</a> · <a href="http://py.qianlong.com" target="_blank">北京地区网站联合辟谣平台</a><br />',"违法和不良信息举报电话：024-31160919<br />","举报邮箱：jubao@renren.com<br />",'<a style="font-weight:600;padding-bottom:" class="copyright" href="javascript:void(0)">版权指引<a>','<div><img src="http://s.xnimg.cn/imgpro/civilization/jubaologoNew.png" height="22" width="25"><a href="http://www.12377.cn/" target="_blank" style="margin-left: 5px;">中国互联网举报中心</a></div>','<p class="typ1"><a href="http://www.bjjubao.org/" target="_blank">北京互联网举报中心</a></p>','<p class="typ2"><a href="http://www.bj.cyberpolice.cn/index.jsp" target="_blank">网络110报警服务</a></p>','<p class="typ3"><a href="http://www.bjwhzf.gov.cn/accuse.do" target="_blank">北京文化市场举报热线</a></p>',"</div>"].join(""),showInfo:function(){this.dialog=e.ui.dialog({title:"法律声明",width:430,buttons:[],close:function(){e(this).remove()}},this.tpl)}};t.init=function(){i.showInfo()}}),define("liquidFooter",function(require,t){var e=jQuery.noConflict();t.init=function(){for(var t=760,i=e(document.documentElement).attr("class").split(" "),n=0,a=i.length;a>n;n++)if(-1!==i[n].indexOf("nx-main")){var s=parseInt(i[n].substring(7));t=isNaN(s)?t:s;break}e(".ft-wrapper").css("width",t+"px")}}),define("navControl",["jquery","exports"],function(t,e){var i={init:function(){this.bannerMoreGroupCon=t("#frameFixedNav .nf-group-list-container"),this.bannerMoreGroupCon.length&&this.events()},events:function(){this.bannerMoreGroupCon.parent().on("mouseenter",this.initScrollBar.bind(this))},initScrollBar:function(){if(this.bannerMoreGroupCon.find(".nf-group-item").length>10){var t=this;require(["ui/scrollbar"],function(){t.bannerMoreGroupCon.scrollbar()})}}};e.init=function(){i.init()}}),define("sideBarControls",["jquery","ui/scrollbar"],function(t){var e,i={appBarScroll:function(){e=t.ui.scrollbar({barClass:"scroll-cont",scrollEle:".app-nav-wrap",stopBubble:!1,wheelSpeed:100},t("#nxSlidebar")[0]),t(window).bind("resize/100",function(){e.update()})},showMyManageApp:function(){t("#my-manage-app").click(function(i){i.preventDefault();var n=t(this).siblings(".app-nav-list");if(0!==n.find("li").length&&!n.is(":animated"))if(n.is(":visible")){var a=t(this);n.slideUp("fast",function(){a.removeClass("app-manage-open"),t(".nx-sidebar").trigger("resize"),t("#my-manage-app").attr("data-tip","我管理的"),t("#my-manage-app .app-title").text("我管理的"),e.update()})}else{var a=t(this);n.slideDown("fast",function(){a.addClass("app-manage-open"),t(".nx-sidebar").trigger("resize"),t("#my-manage-app").attr("data-tip","收起"),t("#my-manage-app .app-title").text("收起"),e.update()})}})},appNavTips:function(){require(["ui/tooltip"],function(){t(".app-nav-list").tooltip({tooltipClass:"app-nav-tooltip nx-tooltip",position:{my:"left-18 center",at:"right center"},items:".app-nav-item",content:function(){var e=t(this).data("tip")||"";return'<div class="ui-tooltip-arr"></div>'+t("<a>").text(e).html()},beforeOpen:function(){return t(".nx-sidebar .app-title").is(":visible")?!0:!1},hide:!1,openDelay:0})})},init:function(){this.appBarScroll(),this.showMyManageApp(),this.appNavTips()}};return i}),define("sidebar",["jquery"],function(t){var e=function(){function e(){return}var i=this,n=t(window),a=t(".nx-right");a.length&&(i.msie="msie"===nx.browser.name&&nx.browser.versionNumber<9?!0:!1,i.fixedEvent||(i.fixedEvent=!0,t(document).on("webpager:fold",function(){a.data("windowscroll")&&!t("#nxContainer").hasClass("nx-freeViewport")&&a.velocity({right:"-=120"})}),t(document).on("webpager:unfold",function(){a.data("windowscroll")&&!t("#nxContainer").hasClass("nx-freeViewport")&&a.velocity({right:"+=120"})}),t(document).on("mainframe:reflow",function(){a.data("windowscroll")&&(nx.data.isDoubleFeed&&t(window).width()>=1260?(a.data("windowscroll",null),a.css({position:"relative",top:0,bottom:0,right:0}),a.prev(".nx-right-placeholder").remove()):a.css("right",(t(".bd-main").width()-t(".bd-content").width())/2+parseInt(t("#nxContainer").css("margin-right"),10)))}),n.on("feedchange",function(t,e){"empty"===e&&a.data("windowscroll")?(a.data("windowscroll",null),a.css({position:"relative",top:0,bottom:0,right:0}),a.prev(".nx-right-placeholder").remove()):n.trigger("scroll")}),n.on("scroll/1",function(){if(!a.parents(".double-cols-feed").length){var e=n.scrollTop();if(a.data("windowscroll"))if(n.scrollTop()<a.data("windowscroll"))a.data("windowscroll",null),a.css({position:"relative",top:0,bottom:0,right:0}),a.prev(".nx-right-placeholder").remove();else{var i=t(".ft-wrapper").outerHeight(!0);n.viewport().check(i).bottom?"0px"===a.css("bottom")&&a.css({top:"auto",bottom:i}):a.css("bottom")===i+"px"&&(a.height()+50>n.height()?a.css({top:"auto",bottom:0}):a.css({top:50,bottom:"auto"}))}else a.height()<t(".bd-content").height()&&e>115&&a.get(0).getBoundingClientRect().bottom-n.height()<1&&(a.height()+50>n.height()?(a.data("windowscroll",a.offset().top+a.height()-n.height()),a.css({top:"auto",bottom:0})):(a.data("windowscroll",115),a.css({top:50,bottom:"auto"})),a.css({position:"fixed",right:n.width()-a.get(0).getBoundingClientRect().right,"z-index":99}),a.prev(".nx-right-placeholder").remove().end().before('<div class="nx-right-placeholder">'))}}),n.trigger("scroll"),t(nx.data.feed).on("sortByTime",e),t(nx.data.feed).on("sortBySmart",e),t(nx.data.feed).on("contentFocus",e),t(nx.data.feed).on("groupFocus",e),t(nx.data.feed).on("friendsNewsFeed",e),t(nx.data.feed).on("friendsOriginal",e),t(nx.data.feed).on("newsfeedFilter",e),i.msie&&(t(nx.data.feed).on("feedLoading",function(){t(".ft-wrapper").css("position","")}),t(nx.data.feed).on("feedRendered",function(){t(".ft-wrapper").css("position","relative")}))))};return{init:function(){new e}}}),define("switchAccount",function(require,t){require("ui/scrollbar");var e=jQuery.noConflict(),i=require("mustache.js"),n={Templ:{accountItem:['<li class="nv-drop-account">','	<a href="javascript:;">','		<span class="ui-icon ui-icon-toogleuser"></span>{{accountType}}',"	</a>","</li>",'<li class="nv-account-sline"></li>'].join(""),actChangeDialog:['<div class="act-change-main">',"	<p>你可以通过切换身份，以公共主页的身份加好友，回踩粉丝与其他主页互动</p>",'	<div class="act-change-list-con">',"		<ul>","			{{#otherAccounts}}",'				<li class="clearfix">','					<div class="user-info">','						<a class="avatar" namecard="{{transId}}" href="http://www.renren.com/profile.do?id={{transId}}">','							<img src="{{head}}">',"						</a>",'						<a class="u-name" namecard="{{transId}}" href="http://www.renren.com/profile.do?id={{transId}}">{{name}}</a>',"					</div>",'					<a class="change-btn" href="javascript:;">切换</a>',"				</li>","			{{/otherAccounts}}","		</ul>","	</div>","</div>"].join(""),pwdConfirmDialog:['<div class="pwd-confirm-main">','	<div class="user-info">','		<img src="{{head}}">',"		<span>{{name}}</span>","	</div>",'	<div class="pwd-confirm">',"		<p>请输入人人帐号“{{name}}”对应密码</p>","		<p><label>帐号：</label><span>{{account}}</span></p>",'		<p><label>密码：</label><input id="switch-account-pwd" type="password"></p>','		<p class="switch-confirm-icode{{hiddenClass}}"><label>验证码：</label><input type="text"></p>','		<p class="switch-confirm-icode-img{{hiddenClass}}"><label></label><img src="http://icode.renren.com/getcode.do?rk=300&t=LOGIN&rnd={{random}}"><a href="javascript:;">换一个</a></p>',"	</div>","</div>"].join("")}},a={getOtherAccounts:function(t,i){e.ajax({url:"http://www.renren.com/getOtherAccounts",type:"get",dataType:"json",success:function(e){t.call(i,e)}})},switchToPage:function(t,i,n){e.ajax({url:"http://page.renren.com/api/pageState",type:"post",dataType:"text",data:"pids="+t,success:function(t){i.call(n,e.parseJSON(t))}})},switchAccount:function(t,i,n){e.ajax({url:"http://www.renren.com/switchAccount",type:"post",data:"origUrl="+encodeURIComponent(document.location.href)+"&destId="+t,dataType:"json",success:function(t){i.call(n,t)}})},checkPwd:function(t,i,n,a){e.ajax({url:"http://www.renren.com/verifypwd/checkPwd",type:"post",data:"ick="+i+"&pwd="+e("#switch-account-pwd").val()+"&origUrl="+encodeURIComponent(document.location.href)+"&destId="+t.id+"&showIC="+(n.hasClass("hidden")?!1:!0),dataType:"json",success:function(t){if("ok"===t.status)document.location.href=t.msg;else if("fail"===t.status){n.removeClass("hidden"),a.removeClass("hidden");var i="http://icode.renren.com/getcode.do?rk=300&t=LOGIN&rnd="+Math.random();a.find("img").attr("src",i),e.dialog.error(t.msg)}}})}},s={init:function(){this.accountAction=e("#nxHeader .hd-account-action:not(.hd-account-action-vip)"),this.dropList=e(".nx-account-drop",this.accountAction),this.nvControl=e(".nv-account-ctrl",this.accountAction),this.accountsData=null,this.switchData=null,this.events()},events:function(){var t=this;this.accountAction.on("mouseenter",".account-more",t.getAccountInfo),this.nvControl.on("click",".nv-drop-account a",function(){t.accountsData.otherAccounts.length>1?t.createDialog(t.accountsData):(t.switchData=t.accountsData.otherAccounts[0],t.switchPageAccount())})},getAccountInfo:function(){var t=this;s.accountAction.off("mouseenter",".account-more",t.getAccountInfo),a.getOtherAccounts(function(t){s.accountsData=t;var a={};if(void 0!==t.otherAccounts){t.otherAccounts.length>1?a.accountType="切换身份":1===t.otherAccounts.length&&("true"===t.otherAccounts[0].isPage||"true"===t.otherAccounts[0].self_isPage?a.accountType="切换至公共主页":t.otherAccounts[0].self_domain?"kaixin.com"===t.otherAccounts[0].self_domain?a.accountType="切换身份":"renren.com"===t.otherAccounts[0].self_domain&&(a.accountType="切换至人人帐号"):t.otherAccounts[0].domain&&("kaixin.com"===t.otherAccounts[0].domain?a.accountType="切换身份":"renren.com"===t.otherAccounts[0].domain&&(a.accountType="切换至人人帐号")));var o=e(i.render(n.Templ.accountItem,a));e(o).prependTo(s.nvControl)}})},switchPageAccount:function(){var t=this;"true"===this.switchData.isPage?a.switchToPage(this.switchData.transId,function(i){return 0!==i.code?void e.dialog.error("网络错误，请稍后再试"):void(i.data[t.switchData.transId]?t.switchUserAccount():e.dialog.error("不能切换身份到"+t.switchData.name+'，请先<a href="http://page.renren.com/'+t.switchData.transId+'/admin/identify">认证</a> 或 <a href="http://page.renren.com/'+t.switchData.transId+'/admin/rename">更名</a>'))}):this.switchUserAccount()},switchUserAccount:function(){var t=this;a.switchAccount(this.switchData.id,function(e){e.isJump?window.location=e.url:t.createPwdDialog(e)})},createDialog:function(t){var a=e(i.render(n.Templ.actChangeDialog,t));this._dialog=e.ui.dialog({title:"切换身份",dialogClass:"act-change-dialog",show:!1,width:500,buttons:[{text:"取消",click:function(){var t=e(this).dialog("instance");t.close()}}],cancel:function(){e(this).remove()},close:function(){e(this).remove()},open:function(){t.otherAccounts.length>3&&e(this).find(".act-change-list-con").scrollbar({minScrollbarLength:1,wheelSpeed:20,stopBubble:!1})}},a),this.dialog=e(".act-change-dialog"),this.dialogEvents()},dialogEvents:function(){var t=this;this.dialog.on("click",".change-btn",function(){var i=e(this).parents("li").index();t.switchData=t.accountsData.otherAccounts[i],t.switchPageAccount()})},createPwdDialog:function(t){var s=this;this.switchData.account=t.account,this.random=Math.random(),t.showIC===!1?this.switchData.hiddenClass=" hidden":this.switchData.hiddenClass="";var o=e(i.render(n.Templ.pwdConfirmDialog,this.switchData));this._pwdDialog=e.ui.dialog({title:"切换身份",dialogClass:"pwd-confirm-dialog",show:!1,width:500,buttons:[{text:"取消",click:function(){var t=e(this).dialog("instance");t.close()}},{text:"确定","class":"ui-button-blue",click:function(){var t=e(this).dialog("instance");t._trigger("confirm")}}],cancel:function(){e(this).remove()},close:function(){e(this).remove()},confirm:function(){a.checkPwd(s.switchData,e(this).find(".switch-confirm-icode input").val(),e(this).find(".switch-confirm-icode"),e(this).find(".switch-confirm-icode-img"))}},o),this.pwdDialog=e(".pwd-confirm-dialog"),this.pwdDialogEvents()},pwdDialogEvents:function(){var t=this;this.pwdDialog.on("click",".switch-confirm-icode-img a",function(){t.changeIC()})},changeIC:function(){var t="http://icode.renren.com/getcode.do?rk=300&t=LOGIN&rnd="+Math.random();this.pwdDialog.find(".switch-confirm-icode-img img").attr("src",t)}};t.init=function(){s.init()}}),define("topSearch",function(require,t){require("ui/placeholder");var e,i=jQuery,n=i("#hd-search"),a="http://sg.renren.com/s/suggest/v7",s="http://browse.renren.com/s/all?from=opensearch&q=",o=[],r="搜索好友，公共主页，状态",c="placeholder"in document.createElement("input");o=['<div id="search-result-box" class="search-result">','		<em class="search-arr-down"><span class="search-arr-outer"></span></em>','		<div class="s-main" id="s-main-cont">','	<div id="s-result-cont">','		<ul class="s-default s-list" ><li id="s-tipword"></li></ul>','		<div class="s-line"></div>','		<div id="s-result-wrap"></div>',"	</div>",'	<ul id="s-default-items" class="s-default s-list">','		<li class="s-def-item s-def-know">','			<a class="s-item" target="_self" href="http://friend.renren.com/newfriends">','				<div class="s-icon"></div>','				<div class="s-info">可能认识的人</div>',"			</a>","		</li>",'		<li class="s-def-item s-def-friend">','			<a class="s-item" target="_self" href="http://friend.renren.com/managefriends">','				<div class="s-icon"></div>','				<div class="s-info">我的好友</div>',"			</a>","		</li>",'		<li class="s-def-item">','			<a class="s-item" target="_self" href="http://www.renren.com/'+nx.user.id+'/profile">','				<div class="s-icon"><img src="'+nx.user.tinyPic+'" alt="" /></div>','				<div class="s-info">个人主页</div>',"			</a>","		</li>",'		<li class="s-def-item s-def-share">','			<a class="s-item" target="_self" href="http://share.renren.com/share/hot/v7">','				<div class="s-icon"></div>','				<div class="s-info">热门</div>',"			</a>","		</li>","	</ul>","</div>","</div>"].join("");var l={makeHtml:function(t,e){var n=[],a=[],o=e.data,r=0,c=nx.stringplus.TSubStringOut(t,10,"..");if(i("#s-search-list").html(""),i("#s-result-cont").hide(),i("#s-default-items").hide(),i("#s-result-wrap").html(""),e.code>-1){if(r=o.user.length+o.zhan.length+o.page.length,0===r)return i("#s-default-items").show(),i("#s-tipword").html('<a class="s-item s-tip"  target="_blank" href="'+s+t+'">在人人网搜索与“'+c+"”相关的内容</a>"),i("#s-result-cont li").first().addClass("s-item-selected"),void i("#s-result-cont").show();n.push('<ul class="s-default s-list" id="s-search-list">'),a.push('<ul class="s-default s-list" id="s-more-list">'),
o.user.length>0&&(o.user.forEach(function(t,e){n.push('<li class="s-def-know">','	<a class="s-item" target="_blank" href="http://www.renren.com/'+t.id+'/profile?ref=opensearch_normal">','		<div class="s-icon"><img src="'+t.pic+'" alt="" /></div>','		<div class="s-info">','			<p class="s-name">'+t.name+'</p><p class="s-dis">'),t.from&&n.push(t.from),t.friend>0&&n.push(" - "+t.friend+"共同好友"),t.friend>0&&t.follow>0&&n.push(" | "),t.follow&&n.push(" - "+t.follow+"人关注"),n.push("				</p></div></a></li>")}),a.push('<li class="s-def-item s-def-know">','	<a class="s-item" target="_blank" href="'+s+c+"#qt="+c+'/tindex=2">','		<div class="s-icon"></div>','		<div class="s-info">搜索叫“'+c+"”的人</div>","	</a>","</li>")),o.page.length>0&&(o.page.forEach(function(t,e){n.push('<li class="s-def-know">','	<a class="s-item" target="_blank" href="'+t.url+'">','		<div class="s-icon"><img src="'+t.pic+'" alt="" /></div>','		<div class="s-info">','			<p class="s-name">'+t.name+'</p><p class="s-dis">公共主页'),t.follow&&n.push(" - "+t.follow+"人关注"),n.push("</p></div></a></li>")}),a.push('<li class="s-def-item s-def-page">','	<a class="s-item" target="_blank" href="'+s+c+"#qt="+c+'/tindex=4">','		<div class="s-icon"></div>','		<div class="s-info">搜索叫“'+c+"”的公共主页</div>","	</a>","</li>")),o.zhan.length>0&&(o.zhan.forEach(function(t,e){n.push('<li class="s-def-know">','	<a class="s-item" target="_blank" href="'+t.url+'">','		<div class="s-icon"><img src="'+t.pic+'" alt="" /></div>','		<div class="s-info">','			<p class="s-name">'+t.name+'</p><p class="s-dis">小站'),t.follow&&n.push(" - "+t.follow+"人关注"),n.push("</p></div></a></li>")}),a.push('<li class="s-def-item s-def-site">','	<a class="s-item" target="_blank" href="'+s+c+"#qt="+c+'/tindex=5">','		<div class="s-icon"></div>','		<div class="s-info">搜索叫“'+c+"”的小站</div>","	</a>","</li>")),n.push("</ul>"),r>0&&n.push('<div class="s-line"></div>'),a.push('</ul><div class="s-line"></div>'),i("#s-tipword").html('<a class="s-item s-tip"  target="_blank" href="'+s+c+'">在人人网搜索与“'+c+"”相关的内容</a>"),i("#s-result-wrap").html(n.join("")+a.join("")),i("#s-result-cont li").first().addClass("s-item-selected"),i("#s-result-cont").show()}else if(0===r)return void i("#s-default-items").show()},moveItem:function(t){var e=i("#s-main-cont li:visible"),n=e.index(i("#s-main-cont .s-item-selected")),a=e.length;e.removeClass("s-item-selected"),n="down"===t?n===a-1?0:n+1:0===n?a-1:n-1,e.eq(n).addClass("s-item-selected")},hideSearch:function(){e.hide(),i("#s-search-list").html(""),i("#s-main-cont li").removeClass("s-item-selected"),i("#s-result-cont").hide();var t=i.trim(n.val());c||(t!==r||0===t.length)&&n.val(r).addClass("hd-search-placeholder")},startSearch:function(){var t=this,e=i.trim(n.val());c||e!==r||n.val("").removeClass("hd-search-placeholder"),e.length>0&&e!==r?i.getJSON(a+"?q="+encodeURI(e)+"&ownerId="+nx.user.id,function(a){var s=i.trim(n.val());s===e?l.makeHtml(e,a):t.startSearch()}):(i("#s-search-list").html(""),i("#s-result-cont").hide(),i("#s-default-items").show())},init:function(){c||n.val(n.attr("placeholder")).addClass("hd-search-placeholder"),n.bind("focus",function(){e=i("#search-result-box"),e.length?e.show():(i(".hd-search").append(i(o)),e=i("#search-result-box"),e.width(n.parent(".hd-search").width())),i("#s-default-items").show(),e.position({of:i(".hd-search"),my:"left top",at:"left bottom+10"}),e.delegate("li","mouseover",function(){i("#s-main-cont li").removeClass("s-item-selected"),i(this).addClass("s-item-selected")}),i("body").bind("click",function(t){t.target!==n[0]&&e.length>0&&l.hideSearch()}),l.startSearch()}).bind("blur",function(){setTimeout(function(){l.hideSearch()},200)}),i(".hd-search-btn").bind("click",function(){top.location.href=s+i.trim(n.val())});var t="";n.bind("keydown",function(e){return 13===e.keyCode||40===e.keyCode||38===e.keyCode?(t=n.val(),void e.preventDefault()):void 0}),n.bind("keyup",function(e){switch(e.keyCode){case 13:if(e.preventDefault(),t===n.val()){var a;a=i("#s-main-cont .s-item-selected").length>0?i("#s-main-cont .s-item-selected").find("a").attr("href"):s+i.trim(n.val()),top.location.href=a}break;case 40:l.moveItem("down"),e.preventDefault();break;case 38:l.moveItem("up"),e.preventDefault();break;default:l.startSearch()}})}};t.init=l.init}),require(["jquery"],function(t){nx.browser.msie&&6===nx.browser.versionNumber&&"http://www.renren.com/notSupportIE6/useIE6"!==window.location.href&&(window.location.href="http://www.renren.com/notSupportIE6/useIE6"),t.expr.cacheLength=20,t.ajaxSetup({timeout:12e4}),t(window).one("load",function(){var t=nx.user.pageid||location.href.match(/http:\/\/([^.]+)/)[1];if(window.performance&&performance.timing){var e=performance.timing.domInteractive-performance.timing.responseStart,i=performance.timing.domComplete-performance.timing.responseStart;12e4>e&&nx.stats.ps.add("ready-"+t,e),3e5>i&&nx.stats.ps.add("load-"+t,i),e>2e9&&nx.stats.gs.send("exception-"+nx.user.id,1),performance.memory&&(nx.stats.ps.add("mlj-"+t,Math.floor(performance.memory.usedJSHeapSize/1e3)),nx.stats.ps.add("mlt-"+t,Math.floor(performance.memory.totalJSHeapSize/1e3)))}else if(nx.log&&nx.log.startTime){var n=new Date-nx.log.startTime;n>0&&3e5>n&&nx.stats.ps.add("load-"+t,n)}}),t(document).one("ready",function(){if(nx.log){var e=nx.user.pageid||location.href.match(/http:\/\/([^.]+)/)[1],i=new Date-nx.log.startTime;i>0&&6e4>i&&!window.performance&&nx.stats.ps.add("ready-"+e,i);var n={get:function(t){return window.localStorage?n.get=function(t){return localStorage.getItem("stats."+t)}:n.get=function(t){return nx.cookie("stats_"+t)},n.get(t)},set:function(t,e){return window.localStorage?n.set=function(t,e){return localStorage.setItem("stats."+t,e)}:n.set=function(t,e){return nx.cookie("stats_"+t,e,{expires:7})},n.set(t,e)}},a=function(){var t=JSON.parse(n.get("online")||"{}"),i=t[e]||{},a=i.activeTime||+new Date,s=i.onlineTime||0,o=+new Date;o-a>12e4?(s>0&&6e5>s&&nx.stats.gs.add("active-"+e,s),s=0):(s+=o-a,s>6e4&&7e4>s&&window.performance&&performance.memory&&(nx.stats.ps.add("maj-"+e,Math.floor(performance.memory.usedJSHeapSize/1e3)),nx.stats.ps.add("mat-"+e,Math.floor(performance.memory.totalJSHeapSize/1e3)))),t[e]={activeTime:o,onlineTime:s},n.set("online",JSON.stringify(t))};a(),t(document).on("click",a),t(window).on("scroll/1000",a),nx.stats.pv(e),nx.stats.gs.add("browser-"+nx.browser.name,nx.browser.versionNumber)}}),t(document).one("ready",function(){var e=window.navigator.userAgent.toLowerCase();e.indexOf("windows nt 5")>-1&&t("body").css({fontFamily:"宋体,Tahoma,arial"}),t(document).one("mouseenter/500","[namecard]",function(){define(["nx/namecard"],function(){t(document).namecard()})}),/^#(?:photo|blog)\//.test(location.hash)?require(["viewer"],t.noop):t(document).one("click","[data-viewer]",function(t){var e=this.getAttribute("data-viewer");require(["viewer"],function(t){t.init(e)}),t.preventDefault()}),t(document).on("click","[data-common]",function(){var e=this.getAttribute("data-common");define(["ui/showCommonFriend"],function(){t.ui.commonFriend({elm:e})})}),nx.webpager&&nx.webpager.disable||0!==t("#webpagerengine").length||t("<iframe>",{id:"webpagerengine",name:"webpagerengine",src:"http://webpager.renren.com/api/ime.jsp",frameBorder:0,width:0,height:0}).appendTo("body")})});